@* @page "/" *@
@* @inject TestAPI.Data.UserService UserService *@
@* @inject IJSRuntime JS *@

@* <h3 class="text-center mb-3">User List</h3> *@

@* <!-- Loader overlay --> *@
@* <div id="loader" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:9999; display:none;"> *@
@*     <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center;"> *@
@*         <div class="spinner-border text-primary" role="status"> *@
@*             <span class="visually-hidden">Loading...</span> *@
@*         </div> *@
@*         <p>Loading data, please wait...</p> *@
@*     </div> *@
@* </div> *@

@* <table class="table table-striped table-bordered"> *@
@*     <thead class="table-dark"> *@
@*         <tr> *@
@*             <th>Name</th> *@
@*             <th>Email</th> *@
@*             <th>City</th> *@
@*             <th>Created Date</th> *@
@*         </tr> *@
@*     </thead> *@
@*     <tbody> *@
@*         @if (users == null) *@
@*         { *@
@*             @for (int i = 0; i < 5; i++) *@
@*             { *@
@*                 <tr> *@
@*                     <td colspan="4" class="text-center text-muted">Loading...</td> *@
@*                 </tr> *@
@*             } *@
@*         } *@
@*         else if (!users.Any()) *@
@*         { *@
@*             <tr> *@
@*                 <td colspan="4" class="text-center">No data available.</td> *@
@*             </tr> *@
@*         } *@
@*         else *@
@*         { *@
@*             @foreach (var t in users) *@
@*             { *@
@*                 <tr> *@
@*                     <td>@t.FullName</td> *@
@*                     <td>@t.Email</td> *@
@*                     <td>@t.City</td> *@
@*                     <td>@t.CreatedAt</td> *@
@*                 </tr> *@
@*             } *@
@*         } *@
@*     </tbody> *@
@* </table> *@

@* @code { *@
@*     private List<TestAPI.Models.Users>? users; *@

@*     protected override async Task OnInitializedAsync() *@
@*     { *@
@*         // Fetch data without JS *@
@*         users = await UserService.GetAllUsersAsync(); *@
@*     } *@

@*     protected override async Task OnAfterRenderAsync(bool firstRender) *@
@*     { *@
@*         if (firstRender) *@
@*         { *@
@*             await JS.InvokeVoidAsync("showLoader"); *@
            
@*             await Task.Delay(100); *@
@*             await JS.InvokeVoidAsync("hideLoader"); *@
@*         } *@
@*     } *@
@* } *@
